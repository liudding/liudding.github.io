(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{437:function(e,t,a){"use strict";a.r(t);var r=a(3),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h3",{attrs:{id:"使用-git-reset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-git-reset"}},[e._v("#")]),e._v(" 使用 git reset")]),e._v(" "),a("p",[e._v("此方法只能撤销本地 git merge。")]),e._v(" "),a("p",[e._v("Git 非常方便的是几乎可以撤消任何操作，包括合并 merge。可以使用  "),a("code",[e._v("git reset")]),e._v("  命令重置到合并之前的版本，从而实现撤消：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("git reset --hard <commit-before-merge>\n")])])]),a("p",[e._v("如果在合并之前没有提交的 hash，还可以使用以下命令变体：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("git reset --hard HEAD~1\n")])])]),a("p",[e._v("这样，使用 “HEAD~1”，让 Git 回到当前 HEAD 之前的提交，通常都是合并之前的一次提交。")]),e._v(" "),a("p",[e._v("需要注意的是，在这两种情况下，都需要使用  "),a("code",[e._v("--hard")]),e._v("  选项。这将丢弃工作副本中的任何本地修改。如果你还有未提交的修改，一定一定要先  "),a("code",[e._v("git stash")]),e._v(" 。")]),e._v(" "),a("h3",{attrs:{id:"如何撤销已推送的-merge"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何撤销已推送的-merge"}},[e._v("#")]),e._v(" 如何撤销已推送的 merge")]),e._v(" "),a("p",[e._v("当未将合并推送到远程仓库时，可以使用上面的方式实现撤销。而如果推送了，那就需要使用下面的方式。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("git revert -m 1 <merge-commit-hash>\n")])])]),a("ul",[a("li",[a("code",[e._v("git revert")]),e._v("  将创建一个新的提交，并抵消掉被合并的提交，不会改变过去的历史。可以安全地取消之前发布的提交.")]),e._v(" "),a("li",[a("code",[e._v("-m 1")]),e._v("  我们要保留的父端，也即被合并到的分支。")]),e._v(" "),a("li",[e._v("确保提供正确的提交 hash：我们必须指定实际的合并提交的 hash。")])]),e._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://github.com/git/git/blob/master/Documentation/howto/revert-a-faulty-merge.txt",target:"_blank",rel:"noopener noreferrer"}},[e._v("revert-a-faulty-merge How-To"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=s.exports}}]);